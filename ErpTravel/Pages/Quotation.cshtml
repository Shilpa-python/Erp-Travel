@page
@model QuotationModel
@{
    ViewData["Title"] = "Booking Quotation";

    var rooms = TempData["Rooms"] as int?;
    var nights = TempData["Nights"] as int?;
    var extraBeds = TempData["ExtraBeds"] as int?;
    var childrenWithBed = TempData["ChildrenWithBed"] as int?;
    var childrenWithoutBed = TempData["ChildrenWithoutBed"] as int?;
    var totalAmount = TempData["TotalAmount"] as decimal?;
    var suggestedVehicle = TempData["SuggestedVehicle"] as string;
    var rentPerDay = TempData["RentPerDay"] as decimal?;
    var totalRent = TempData["TotalRent"] as decimal?;
    var itinerary = TempData["Itinerary"] as List<string>;
}

<h1>Booking Quotation</h1>

<div class="quotation-container">

    <h4>Travel Details</h4>
    <p><strong>Number of Adults:</strong> @Model.Adults</p>
    <p><strong>Number of Children:</strong> @Model.Children</p>
    <p><strong>Number of Days:</strong> @Model.Days</p>
    <p><strong>Number of Nights:</strong> @Model.Nights</p>

    <h4>Hotel Booking Details</h4>
    <p><strong>Number of Rooms:</strong> @Model.Rooms</p>
    <p><strong>Number of Extra Beds:</strong> @Model.ExtraBeds</p>
    <p><strong>Number of Children with Bed:</strong> @Model.ChildrenWithBed</p>
    <p><strong>Number of Children without Bed:</strong> @Model.ChildrenWithoutBed</p>

    

    @{
        // Retrieving the room type from the form data
        var roomType = Model.RoomType;
        var hotels = new List<(string Name, decimal Price)>();

        // Based on room type and star rating, define available hotels
        if (roomType == "Superior-3star")
        {
            hotels = new List<(string, decimal)>
    {
    ("Hotel A", 1500m),
    ("Hotel B", 1550m),
    ("Hotel C", 1600m)
    };
        }
        else if (roomType == "Superior-4star")
        {
            hotels = new List<(string, decimal)>
    {
    ("Hotel D", 2000m),
    ("Hotel E", 2050m),
    ("Hotel F", 2100m)
    };
        }
        else if (roomType == "Superior-5star")
        {
            hotels = new List<(string, decimal)>
    {
    ("Hotel G", 2500m),
    ("Hotel H", 2550m),
    ("Hotel I", 2600m)
    };
        }
       else if (roomType == "Deluxe-3star")
        {
            hotels = new List<(string, decimal)>
    {
    ("Hotel A", 1500m),
    ("Hotel B", 1550m),
    ("Hotel C", 1600m)
    };
        }
        else if (roomType == "Deluxe-4star")
        {
            hotels = new List<(string, decimal)>
    {
    ("Hotel D", 2000m),
    ("Hotel E", 2050m),
    ("Hotel F", 2100m)
    };
        }
        else if (roomType == "Deluxe-5star")
        {
            hotels = new List<(string, decimal)>
    {
    ("Hotel G", 2500m),
    ("Hotel H", 2550m),
    ("Hotel I", 2600m)
    };
        
    }
        else if (roomType == "DeluxePremiere-3star")
        {
            hotels = new List<(string, decimal)>
    {
    ("Hotel A", 1500m),
    ("Hotel B", 1550m),
    ("Hotel C", 1600m)
    };
        }
        else if (roomType == "DeluxePremiere-4star")
        {
            hotels = new List<(string, decimal)>
    {
    ("Hotel D", 2000m),
    ("Hotel E", 2050m),
    ("Hotel F", 2100m)
    };
        }
        else if (roomType == "DeluxePremiere-5star")
        {
            hotels = new List<(string, decimal)>
    {
    ("Hotel G", 2500m),
    ("Hotel H", 2550m),
    ("Hotel I", 2600m)
    };
    }
        else if (roomType == "FamilySuite-3star")
        {
            hotels = new List<(string, decimal)>
    {
    ("Hotel A", 1500m),
    ("Hotel B", 1550m),
    ("Hotel C", 1600m)
    };
        }
        else if (roomType == "FamilySuite-4star")
        {
            hotels = new List<(string, decimal)>
    {
    ("Hotel D", 2000m),
    ("Hotel E", 2050m),
    ("Hotel F", 2100m)
    };
        }
        else if (roomType == "FamilySuite-5star")
        {
            hotels = new List<(string, decimal)>
    {
    ("Hotel G", 2500m),
    ("Hotel H", 2550m),
    ("Hotel I", 2600m)
    };
        }
        }
    <h4>Available Hotels</h4>
    <table class="hotel-table">
        <thead>
            <tr>
                <th>Hotel Name</th>
                <th>Price per Night (INR)</th>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < hotels.Count; i++)
            {
            <tr>
            <td>@hotels[i].Name</td>
            <td>@hotels[i].Price.ToString("0.00")</td>
            </tr>
            }
        </tbody>
    </table>

    <h4>Transportation</h4>
    <p><strong>Suggested Vehicle:</strong> @Model.SuggestedVehicle</p>
    <p><strong>Vehicle Rent per Day:</strong> INR @Model.RentPerDay.ToString("0.00")</p>
    <p><strong>Total Vehicle Rent:</strong> INR @Model.TotalRent.ToString("0.00")</p>

    <h4>Itinerary</h4>
    @if (Model.Itinerary != null && Model.Itinerary.Any())
    {
        <ul>
            @foreach (var itineraryItem in Model.Itinerary)
            {
                <li>@itineraryItem</li>
            }
        </ul>
    }
    else if (!string.IsNullOrEmpty(Model.SelectedItinerary))
    {
        <p>Selected Itinerary: @Model.SelectedItinerary</p>
        <ul>
            @if (Model.SelectedItinerary == "Itinerary1")
            {
                <li>Day 1: Arrival and City Tour.</li>
                <li>Day 2: Cultural visits and Museums.</li>
                <li>Day 3: Departure.</li>
            }
            else if (Model.SelectedItinerary == "Itinerary2")
            {
                <li>Day 1: Adventure Trek.</li>
                <li>Day 2: Nature walk and Safari.</li>
                <li>Day 3: Departure.</li>
            }
            else if (Model.SelectedItinerary == "Itinerary3")
            {
                <li>Day 1: Relax on the Beach.</li>
                <li>Day 2: Explore the Coastal town.</li>
                <li>Day 3: Departure.</li>
            }
        </ul>
    }
    else
    {
        <p>No itinerary available.</p>
    }

    <h4>Cost Breakdown Per Head:</h4>
    <p><strong>Cost per Adult:</strong> INR @Model.PerHeadAdultCost.ToString("0.00")</p>
    <p><strong>Cost per Child with Bed:</strong> INR @Model.PerHeadChildWithBedCost.ToString("0.00")</p>
    <p><strong>Cost per Child without Bed:</strong> INR @Model.PerHeadChildWithoutBedCost.ToString("0.00")</p>
    <p><strong>Cost per Extra Bed:</strong> INR @Model.PerHeadExtraBedCost.ToString("0.00")</p>

    <h4>Total Quotation:</h4>
    <p><strong>Total Amount (Rooms + Vehicle):</strong> INR @Model.GrandTotal</p>

    <div>
        <form method="post">
            <button type="submit" asp-page="/BookingConfirm">Confirm Booking</button>
        </form>
    </div>
</div>

<style>
    .quotation-container {
        border: 1px solid #ccc;
        padding: 20px;
        margin-top: 20px;
    }

    h4 {
        margin-top: 20px;
    }

    .hotel-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
    }

        .hotel-table th, .hotel-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .hotel-table th {
            background-color: #f2f2f2;
        }
</style>
